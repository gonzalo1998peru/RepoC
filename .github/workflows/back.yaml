name: Push to another repo

on:
  push:
    branches:
      - main  # Puedes cambiar 'main' a la rama que desees monitorear

jobs:
  push_to_other_repo:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout source code
      uses: actions/checkout@v2  # Hace checkout del c√≥digo del repositorio actual

    - name: Set up Git
      run: |
        git config --global user.name "GitHub Action"
        git config --global user.email "action@github.com"

    - name: Push to another repository
      env:
        TARGET_REPO_TOKEN: ${{ secrets.BACK_SECRET }}  # Este es el token que agregaste en los secretos
      run: |
        git clone --branch target-branch https://x-access-token:${{ secrets.token_back }}@github.com/gonzalo1998peru/RepoD.git target-repo
        rsync -av --exclude='.git' ./ target-repo/
        cd RepoD
        git add .
        git commit -m "Automated update from RepoC to RepoD"
        git push origin target-branch
